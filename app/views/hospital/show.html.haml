%h1 #{@hospital.name}
%h3 #{@hospital.sub_type}

.row-fluid
	.span8
		%p hospital description here
		%p phone number here
		%a website here
	.span4
		.well
			%p map here
			%p #{@hospital.addr_street} <br> #{@hospital.addr_city}, IL #{@hospital.addr_zip}
			%a{:href => "https://maps.google.com/maps?f=d&hl=en&geocode=&daddr=#{@hospital.addr_street}+#{@hospital.addr_city},+IL+#{@hospital.addr_zip}"} <button class="btn">Get Directions</button>
.row-fluid
	.span12
		%h3 Hospital Admissions Data
		- admissions_by_type = fetch_provider_data(@hospital.src_id, "Admissions by Type")
		- total_admissions = admissions_by_type[:values].sum
		- medsurg_admissions_by_age = fetch_provider_data(@hospital.src_id, "Medical-Surgical Admissions By Age")
		- total_medsurg_admissions = medsurg_admissions_by_age[:values].sum
.row-fluid
	.span4
		%h4 Total Admissions
		%p.input-large #{total_admissions.to_i}
	.span4
		%h4 Medical Surgical Admissions
		%p #{total_medsurg_admissions.to_i}
.row-fluid
	.span12
		%h4#admissions-by-type Admissions by Type
		%p Description
		- chart_id = "chart_admissions_type"
		.chart{:id => chart_id}
		- content_for :javascripts do
			:javascript
				$(function () {

					var seriesData = [{
						data: #{admissions_by_type[:values]},
						name: "Admissions in 2012"
					}];
					ChartHelper.create("#{chart_id}", "column", seriesData, Date.UTC(2000, 1, 1), "", "", "count", #{admissions_by_type[:stats]});
				});
		%h4#admission-by-x Medical-Surgical Admissions by Age
		%p Description
		- chart_id = "chart_admissions_age"
		.chart{:id => chart_id}
		- content_for :javascripts do
			:javascript
				$(function () {

					var seriesData = [{
						data: #{medsurg_admissions_by_age[:values]},
						name: "Admissions in 2012"
					}];
					ChartHelper.create("#{chart_id}", "column", seriesData, Date.UTC(2000, 1, 1), "", "", "count", #{medsurg_admissions_by_age[:stats]});
				});
		%h4#admission-by-x Admissions by X
		%p Description

.row-fluid
	.span12
		%h3 Hospital Revenue Data
		- revenue_inpatient = fetch_provider_data(@hospital.src_id, "Inpatient Revenue by Payment Type")
		- inpatient_total = revenue_inpatient[:values].sum
		- revenue_outpatient = fetch_provider_data(@hospital.src_id, "Outpatient Revenue by Payment Type")
		- outpatient_total = revenue_outpatient[:values].sum
		%h5 reporting period: #{revenue_inpatient[:start_date].strftime("%m/%d/%y")} - #{revenue_inpatient[:end_date].strftime("%m/%d/%y")}
.row-fluid
	.span4
		%h4#revenue-total Total Revenue
		%p Description
		.chart{:id => "rev_total"}
		- content_for :javascripts do
			:javascript
				$(function () {
					var seriesData = [
						{data: [#{outpatient_total}], name: "Outpatient Revenue"},
						{data: [#{inpatient_total}], name: "Inpatient Revenue"}
					]
					ChartHelper.create("rev_total", "column", seriesData, Date.UTC(2000, 1, 1), "", "", "money", ["Total Revenue"], true);
				});
	.span8
		%h4#revenue-combined Revenue by Source
		%p Description
		.chart{:id => "rev_combined"}
		- content_for :javascripts do
			:javascript
				$(function () {

					var seriesData = [
						{data: #{revenue_outpatient[:values]},
						name: "Outpatient Revenue"},
						{data: #{revenue_inpatient[:values]},
						name: "Inpatient Revenue"}];
					ChartHelper.create("rev_combined", "column", seriesData, Date.UTC(2000, 1, 1), "", "", "money", #{revenue_inpatient[:stats]}, true);
				});
